<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Trucking Dispatch Simulator — Load Board</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css"/>
  <link rel="stylesheet" href="./assets/css/styles.css"/>
</head>
<body>
  <div id="app">
    <div id="map"></div>

    <div class="legend" id="legend"></div>

    <!-- Startup Modal -->
    <div id="startupModal" class="startup-modal">
      <div class="startup-box">
        <h2>Start Company</h2>
        <div class="field">
          <label for="startupName">Company Name</label>
          <input id="startupName" type="text" />
        </div>
        <div class="field">
          <label for="startupCity">Headquarters</label>
          <select id="startupCity"></select>
        </div>
        <button id="startupBegin" class="btn">Start</button>
      </div>
    </div>

    <!-- Draw & Save controls -->
    <div class="drawbar" style="display:none;">
      <span class="lbl">Manual Route for</span>
      <select id="ovrOrigin"></select>
      <span>→</span>
      <select id="ovrDest"></select>
      <button id="btnStartDraw" class="btn">Draw Polyline</button>
      <button id="btnSaveOverride" class="btn">Save Override</button>
      <button id="btnClearOverride" class="btn">Clear Override</button>
      <button id="btnExportOverrides" class="btn">Export</button>
      <label class="btn" for="fileImport">Import</label>
      <input id="fileImport" class="file-input" type="file" accept="application/json"/>
      <button id="btnToggleCompleted" class="btn" style="display:none;">Show Completed</button>
      <span class="badge">Store: local</span>
    </div>

    
    <!-- Company Panel -->
    <div class="panel" id="panelCompany">
      <header>
        <div id="companyPanelTitle">Company</div>
        <div class="close-x" data-close="#panelCompany">✕</div>
      </header>
      <div class="content">
        <!-- company content is rendered dynamically in UI.refreshCompany() -->
      </div>
    </div>


    <!-- Market Panel -->
    <div class="panel" id="panelMarket">
      <header>
        <div>Market</div>
        <div class="close-x" data-close="#panelMarket">✕</div>
      </header>
      <div class="content"></div>
    </div>


    <!-- Bank Panel -->
    <div class="panel" id="panelBank">
      <header>
        <div>Bank</div>
        <div class="close-x" data-close="#panelBank">✕</div>
      </header>
      <div class="content">
        <!-- bank content rendered dynamically -->
      </div>
    </div>

    <!-- Equipment Panel -->
    <div class="panel" id="panelEquipment">
      <header>
        <div>Equipment</div>
        <div class="close-x" data-close="#panelEquipment">✕</div>
      </header>
      <div class="content"></div>
    </div>

    <!-- Properties Panel -->
    <div class="panel" id="panelProperties">
      <header>
        <div>Properties</div>
        <div class="close-x" data-close="#panelProperties">✕</div>
      </header>
      <div class="content"></div>
    </div>


    <!-- Time HUD: clock + month calendar + time controls -->
    <div id="timeHud" class="time-hud">
      <div class="time-row">
        <div id="clock24" class="clock24">00:00:00</div>
        <div class="time-controls">
          <button id="btnPause" title="Pause">⏸</button>
          <button id="btn1x"   title="Play 1×">▶︎1×</button>
          <button id="btn2x"   title="Fast 2×">▶︎▶︎2×</button>
          <button id="btn4x"   title="Double Fast 4×">▶︎▶︎▶︎4×</button>
        </div>
      </div>
      <div id="miniCal" class="mini-cal"></div>
    </div>

    <div class="toolbar">
      <button onclick="UI.show('#panelCompany')">Company</button>
      <button onclick="UI.show('#panelMarket')">Market</button>
      <button onclick="UI.openLoadBoard()">Load Board</button>
      <button id="btnDevTools" onclick="UI.toggleDevTools()">Show Dev Tools</button>
    </div>

    <!-- Pause Menu -->
    <div id="pauseMenu" class="pause-menu">
      <div class="pause-box">
        <h2>Paused</h2>
        <button id="btnResume" class="btn">Resume</button>
        <button id="btnSaveGame" class="btn">Save Game</button>
        <button id="btnLoadGame" class="btn">Load Game</button>
        <button id="btnNewGame" class="btn">Start New Game</button>
        <input id="fileLoadGame" class="file-input" type="file" accept="application/json"/>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
  <script type="module" src="./src/main.js"></script>
</body>
</html>
